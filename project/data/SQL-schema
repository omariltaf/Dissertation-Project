CREATE TABLE `locations` (
  `userID` char(24) NOT NULL DEFAULT '',
  `timestamp` datetime NOT NULL,
  `latitude` double NOT NULL,
  `longitude` double NOT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `accuracy` double DEFAULT NULL,
  PRIMARY KEY (`userID`,`timestamp`,`latitude`,`longitude`),
  KEY `timestamp_index` (`timestamp`),
  KEY `lat_index` (`latitude`) USING BTREE,
  KEY `long_index` (`longitude`),
  KEY `created_at` (`created_at`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


CREATE TABLE `segments` (
  `id` char(24) NOT NULL,
  `userID` char(24) NOT NULL DEFAULT '',
  `type` int(11) unsigned NOT NULL COMMENT 'The segment type is the same as activity type.',
  `startDate` datetime NOT NULL,
  `endDate` datetime NOT NULL,
  `distanceTravelled` double unsigned DEFAULT NULL COMMENT 'This value givees distance in meters. It given a segment, it computes the distance travelled by taking all the locations returned by the ocation service between start and end times',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `numberOfBriskChunks` int(11) unsigned DEFAULT NULL,
  `steps` int(24) unsigned DEFAULT NULL,
  `userChanged` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`userID`,`type`,`startDate`,`endDate`),
  KEY `FK_segments_type` (`type`),
  KEY `FK_segments_userID` (`userID`),
  KEY `end_date_index` (`endDate`) USING BTREE,
  KEY `start_date_index` (`startDate`),
  KEY `create_index` (`created_at`) USING BTREE,
  CONSTRAINT `FK_segments_type` FOREIGN KEY (`type`) REFERENCES `activity_type` (`type`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_segments_userID` FOREIGN KEY (`userID`) REFERENCES `local_users` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='activity segments computed and sent from users''phoneâ€™;


CREATE TABLE `activities` (
  `activityID` char(24) NOT NULL DEFAULT '',
  `userID` char(24) NOT NULL DEFAULT '',
  `type` int(11) unsigned NOT NULL,
  `confidence` int(11) NOT NULL,
  `startDate` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `endDate` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`userID`,`type`,`startDate`,`endDate`),
  KEY `FK_activity_type` (`type`),
  KEY `start_date_index` (`startDate`) USING BTREE,
  KEY `end_date_index` (`endDate`) USING BTREE,
  KEY `create_at_index` (`created_at`) USING BTREE,
  CONSTRAINT `FK_activities_userID` FOREIGN KEY (`userID`) REFERENCES `local_users` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_activity_type` FOREIGN KEY (`type`) REFERENCES `activity_type` (`type`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='activities extracted from raw json file from requests table';

0	IN_VEHICLE
1	ON_BICYCLE
2	ON_FOOT
3	STILL
4	UNKNOWN
5	TILTING
7	WALKING
8	RUNNING
1000	REMOVED
